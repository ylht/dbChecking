# Scheme 设计思路

## 初始化

1. 随机确定table的数量。
2. 为每个table随机确定column的数量，表大小等基础数据。
3. 根据概率随机确定每个column的数据类型，支持的类型包括int，decimal，varchar/char和date。
4. 根据每种column的类型随机确定其约束范围，即int，decimal列的min和max，varchar和char的长度限制等等
5. 重复2-4直至生成全部数据
6. 需要确保int+decimal的column的数量之和大于最低的数量限制，如果小于则重新随机。

## 数据导入

每个线程生成一张表的数据。对于每张表的数据生成，对于每一行，按照每一个column的数据生成器获取本列的随机数据，最终拼接成一行的数据，将其写入到文件，全部写入后，上传到数据库

## 工作组选择

由于列的属性很复杂，有int，decimal，varchar/char，date等等。但是真正参与到的事务中的只有int/decimal，因此从所有的表中抽取所有的int和decimal的column的index，随机分配给每个工作组即可，但是需要保证每组工作组的类型是统一的，即要么同为decimal，要么同为int